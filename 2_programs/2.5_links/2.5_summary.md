<h1>Конспект лекций модуля 2.5 "Ссылки"</h1>

+ Для того чтобы исправить некоторые недостатки указателей, в C++ введены ссылки. 
+ Ссылки являются “красивой обёрткой” над указателями:
```c++
void swap (int& a, int& b) {
    int t = b;
    b = a;
    a = t;
}

int main() {
    int k = 10, m = 20;
    swap(k, m);
    cout << k << m << endl;
    return 0;
}
```

<h2>Различие ссылок и указателей</h2>

+ Ссылка не может быть неинициализированной.
```c++
int* p; // OK
int& l; // ошибка
```

+ У ссылки нет нулевого значения.
```c++
int* p = 0; // OK
int& l = 0; // ошибка
```

+ Ссылку нельзя переинициализировать.
```c++
int a = 10, b = 20;
int* p = &a; // p указывает на a
p = &b; // p указывает на b
int& l = a; // l ссылается на a
l = b; // a присваивается значение b
```

+ Нельзя получить адрес ссылки или ссылку на ссылку.
```c++
int a = 10;
int* p = &a; // p указывает на a
int** pp = &p; // pp указывает на переменную p
int& l = a; // l ссылается на a
int* pl = &l; // pl указывает на переменную a
int&& ll = l; // ошибка
```

+ Нельзя создавать массивы ссылок
```c++
int* mp [10] = {}; // массив указателей на int
int& ml [10] = {}; // ошибка
```

+ Для ссылок нет арифметики

<h2>lvalue и rvalue</h2>

+ Выражения в C++ можно разделить на два типа:
1. lvalue — выражения, значения которых являются ссылкой
   на переменную/элемент массива, а значит могут быть
   указаны слева от оператора =.
2. rvalue — выражения, значения которых являются
   временными и не соответствуют никакой
   переменной/элементу массива. 

+ Указатели и ссылки могут указывать только на lvalue.
```c++
int a = 10, b = 20;
int m [10] = {1 ,2 ,3 ,4 ,5 ,5 ,4 ,3 ,2 ,1};
int& l1 = a; // OK
int& l2 = a + b ; // ошибка
int& l3 = *(m + a / 2); // OK
int& l4 = *(m + a / 2) + 1; // ошибка
int& l5 = (a + b > 10) ? a : b; // OK
```

<h2>Время жизни переменной</h2>

+ Следует следить за временем жизни переменных.
```c++
int* foo () {
    int a = 10; // при выходе из функции foo() переменная a перестанет существовать
    return &a;
}

int& bar () {
    int b = 20;
    return b;
}
```

```c++
int* p = foo (); // p указывает на переменную, которая уже не существует
int& l = bar (); // дальнейшее обращение к переменной l некорректно
```